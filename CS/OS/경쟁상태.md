## 경쟁 상태(Race Condition)
- 둘 이상의 프로세스가 공유된 자원(변수, 메모리 등)에 대해 동시에 접근하고 변경하는 경우 발생 할 수 있는 문제
- 두 개의 스레드가 하나의 자원을 놓고 서로 사용하려고 경쟁하는ㄴ 상황

### 경쟁 상태의 문제점
- 예측 불가능한 결과
  - 여러 스레드나 프로세스마다 실행 속도가 달라서 잘못된 값을 읽거나 수정 할 수 있음
- 일관성 손실
  - 여러 스레드나 프로세스가 데이터를 수정 시 예기치 않은 상태로 데이터가 변경 될 수 있음
- 디버깅의 어려움
  - 여러 스레드나 프로세스의 각각 다른 실행 속도로 인해 실행 흐름을 읽기 힘들어 디버깅이 힘듬
- 잠금 대기 시간
  - 경쟁 상태를 방지하기 위해 무분별한 락 사용시 대기 시간으로 인한 성능저하가 발생 가능

### 예방 방법
- 상호 배제(Mutual Exclusion)
  - 공유 데이터에 접근하는 부분을 임계 영역으로 지정하고, 한 번에 하나의 실행 흐름만 해당 영역에 들어가도록 함
- 공유 데이터를 최소한 병렬 처리 설계
  - 데이터를 적절히 분리하여 각 스레드가 독립적으로 처리하도록 함
- 스레드 안정성 보장
  - 공유 데이터를 수정하는 함수나 메소드를 스레드 안전 하도록 구현
- 테스트와 검증
  - 코드를 작성 후 테스트를 진행
  - 테스트 코드를 작성하여 원하는 결과가 나오는지 확인

### 상호 배제(Mutual Exclusion, Mutex)
- 동시 프로그래밍에서 공유 불가능한 자원의 동시 사용을 피하기 위해 사용되는 알고리즘
- 임계 구역(Critical Section)으로 불리는 코드 영역에 의해 구현
- 공유된 자원의 데이터를 여러 스레드가 접근하는 것을 막는 방법
- 공유된 자원은 한번에 한 프로세스(스레드)만이 사용 할 수 있어야 함
- key 에 해당하는 어떤 오브젝트가 있으며 이 오브젝트를 소유한 스레드 or 프로세스 만이 공유 자원에 접근 가능
- 공유자원에 대한 단순한 상호 배제가 필요 할 때 사용

#### 임계 구역(Critical Section)
- 공유 변수 영역은 병렬 컴퓨팅에서 둘 이사으이 스레드가 동시에 접근해선 안되는 공유 자원을 접근하는 코드의 일부를 말함
- 임계 구역에 접근하기 전에 락(Lock)이나 세마포어(Semaphore)와 같은 동기화 메커니즘을 사용하여 한 번에 하나의 실행 흐름만이 임계 구역에 들어갈 수 있도록 함

### 세마포어(Semaphore)
- 공유 자원에 대한 접근 가능 수를 관리하는 동기화 도구
- 제한된 수의 자원에 여러 스레드가 접근해야 할 때 사용
- 카운팅 세마포어 : 동시에 접근 가능한 스레드의 수를 나타내는 정수 값을 가짐
- 이진 세마포어 : 값이 0 or 1 인 세마포어로, 뮤텍스와 유사한 기능을 함

#### 뮤텍스와 세마포어의 차이
- 동작 방식
  - 뮤텍스는 상호 배제를 위해서 한번에 하나으 스레드만 자원에 접근 가능
  - 세마포어는 지정된 수만큼의 스레드가 자원에 동시 접근 가능
- 소유권
  - 뮤텍스에는 소유권이 있어 획득한 스레드만 해제 가능
  - 세마포어는 소유권이 없어 어떤 스레드든 해제 가능
- 목적
  - 뮤텍스는 주로 단일 자원에 대한 접근제어에 사용
  - 세마포어는 제한된 수의 자원을 관리하거나 생산자-소비자 문제와 같은 도이고하에서 사용